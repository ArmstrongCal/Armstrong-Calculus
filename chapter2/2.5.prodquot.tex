\section{The product and quotient rules} \label{S:2.5.ProdQuot}

\begin{goals}
\item How does the algebraic structure of a function direct us in computing its derivative using shortcut rules?
\item How do we compute the derivative of a product of two basic functions in terms of the derivatives of the basic functions?
\item How do we compute the derivative of a quotient of two basic functions in terms of the derivatives of the basic functions?
\item How do the product and quotient rules combine with the sum and constant multiple rules to expand the library of functions we can quickly differentiate?
\item What are the derivatives of the tangent, cotangent, secant, and cosecant functions?
\item How do the derivatives of $\tan(x)$, $\cot(x)$, $\sec(x)$, and $\csc(x)$ combine with other derivative rules we have developed to expand the library of functions we can quickly differentiate?
\end{goals}

%--------------------------------------
% SUBSECTION INTRODUCTION
%--------------------------------------
\subsection*{Introduction}

So far, the basic functions we know how to differentiate include power functions ($x^n$), exponential functions ($a^x$), and the two fundamental trigonometric functions ($\sin(x)$ and $\cos(x)$).  With the sum rule and constant multiple rules, we can also compute the derivative of combined functions such as
$$f(x) = 7x^{11} - 4 \cdot 9^x + \pi \sin(x) - \sqrt{3}\cos(x),$$
because the function $f$ is fundamentally a sum of basic functions.  Indeed, we can now quickly say that $f'(x) = 77x^{10} - 4 \cdot 9^x \ln(9) + \pi \cos(x) + \sqrt{3} \sin(x)$.  

But we can of course combine basic functions in ways other than multiplying them by constants and taking sums and differences.  For example, we could consider the function that results from a product of two basic functions, such as $$p(z) = z^3 \cos(z),$$
or another that is generated by the quotient of two basic functions, one like
$$q(t) = \frac{\sin(t)}{2^t}.$$
While the derivative of a sum is the sum of the derivatives, it turns out that the rules for computing derivatives of products and quotients are more complicated.  In what follows we explore why this is the case, what the product and quotient rules actually say, and work to expand our repertoire of functions we can easily differentiate.  To start, Preview Activity~\ref{PA:2.5} asks you to investigate the derivative of a product and quotient of two polynomials.

\input{previews/2.5.PA1} % PREVIEW ACTIVITY

%-----------------------------------
% SUBSECTION PRODUCT RULE
%-----------------------------------
\subsection*{The product rule}

As parts (b) and (d) of Preview Activity~\ref{PA:2.5} show, it is not true in general that the derivative of a product of two functions is the product of the derivatives of those functions.  Indeed, the rule for differentiating a function of the form $p(x) = f(x) \cdot g(x)$ in terms of the derivatives of $f$ and $g$ is more complicated than simply taking the product of the derivatives of $f$ and $g$.  To see further why this is the case, as well as to begin to understand how the product rule actually works, we consider an example involving meaningful functions.

Say that an investor is regularly purchasing stock in a particular company.  Let $N(t)$ be a function that represents the number of shares owned on day $t$, where $t = 0$ represents the first day on which shares were purchased.  Further, let $S(t)$ be a function that gives the value of one share of the stock on day $t$; note that the units on $S(t)$ are dollars per share.  Moreover, to compute the total value on day $t$ of the stock held by the investor, we use the function $V(t) = N(t) \cdot S(t)$.  By taking the product 
$$V(t) = N(t) \, \mbox{shares} \cdot S(t) \, \mbox{dollars per share},$$ 
we have the total value in dollars of the shares held.  Observe that over time, both the number of shares and the value of a given share will vary.  The derivative $N'(t)$ measures the rate at which the number of shares held is changing, while $S'(t)$ measures the rate at which the value per share is changing.  The big question we'd like to answer is: how do these respective rates of change affect the rate of change of the total value function?

To help better understand the relationship among changes in $N$, $S$, and $V$, let's consider some specific data.  Suppose that on day $100$, the investor owns $520$ shares of stock and the stock's current value is $\$27.50$ per share.  This tells us that $N(100) = 520$ and $S(100) = 27.50$.  In addition, say that on day $100$, the investor purchases an additional $12$ shares (so the number of shares held is rising at a rate of $12$ shares per day), and that on that same day the price of the stock is rising at a rate of $0.75$ dollars per share per day.  Viewed in calculus notation, this tells us that $N'(100) = 12$ (shares per day) and $S'(100) = 0.75$ (dollars per share per day).  At what rate is the value of the investor's total holdings changing on day $100$?

Observe that the increase in total value comes from two sources: the growing number of shares, and the rising value of each share.  If only the number of shares is rising (and the value of each share is constant), the rate at which which total value would rise is found by computing the product of the current value of the shares with the rate at which the number of shares is changing.  That is, the rate at which total value would change is given by \small
\[ S(100) \cdot N'(100) = 27.50 \, \frac{\mbox{dollars}}{\mbox{share}} \cdot 12 \, \frac{\mbox{shares}}{\mbox{day}} = 330 \, \frac{\mbox{dollars}}{\mbox{day}}.\] \normalsize
Note particularly how the units make sense and explain that we are finding the rate at which the total value $V$ is changing, measured in dollars per day.  If instead the number of shares is constant, but the value of each share is rising, then the rate at which the total value would rise is found similarly by taking the product of the number of shares with the rate of change of share value.  In particular, the rate total value is rising is \small
\[ N(100) \cdot S'(100) = 520 \, \mbox{shares} \cdot 0.75 \, \frac{\mbox{dollars per share}}{\mbox{day}} = 390 \, \frac{\mbox{dollars}}{\mbox{day}}. \] \normalsize
Of course, when both the number of shares is changing and the value of each share is changing, we have to include both of these sources, and hence the rate at which the total value is rising is \small
\begin{align*}
V'(100) & = S(100) \cdot N'(100) + N(100) \cdot S'(100) \\
& = 330 + 390 = 720 \, \frac{\mbox{dollars}}{\mbox{day}}.
\end{align*}\normalsize

This tells us that we expect the total value of the investor's holdings to rise by about $\$720$ on the 100th day.\sidenote[][-4cm]{While this example highlights why the product rule is true, there are some subtle issues to recognize.  For one, if the stock's value really does rise exactly $\$0.75$ on day $100$, and the number of shares really rises by $12$ on day $100$, then we'd expect that $V(101) = N(101) \cdot S(101) = 532 \cdot 28.25 = 15029$.  If, as noted above, we expect the total value to rise by $\$720$, then with $V(100) = N(100) \cdot S(100) = 520 \cdot 27.50 = 14300$, then it seems like we should find that $V(101) = V(100) + 720 = 15020.$  Why do the two results differ by $9$?  One way to understand why this difference occurs is to recognize that $N'(100) = 12$ represents an \emph{instantaneous} rate of change, while our (informal) discussion has also thought of this number as the total change in the number of shares over the course of a single day.  The formal proof of the product rule reconciles this issue by taking the limit as the change in the input tends to zero.}

Next, we expand our perspective from the specific example above to the more general and abstract setting of a product $p$ of two differentiable functions, $f$ and $g$.  If we have $P(x) = f(x) \cdot g(x)$, our work above suggests that $P'(x) = f(x) g'(x) + g(x) f'(x).$ Indeed, a formal proof using the limit definition of the derivative can be given to show that the following rule, called the \emph{product rule}\index{product rule}, holds in general.

\concept{ Product Rule \index{product rule}}{ % CONCEPT
If $f$ and $g$ are differentiable functions, then their product $P(x) = f(x) \cdot g(x)$ is also a differentiable function, and
\[ P'(x) = f(x) g'(x) + g(x) f'(x). \]
} %end concept

\input{examples/2-5_Eg1} %EXAMPLE (PRODUCT RULE PROOF)

In light of the earlier example involving shares of stock, the product rule also makes sense intuitively:  the rate of change of $P$ should take into account both how fast $f$ and $g$ are changing, as well as how large $f$ and $g$ are at the point of interest.  Furthermore, we note in words what the product rule says:  if $P$ is the product of two functions $f$ (the first function) and $g$ (the second), then "the derivative of $P$ is the first times the derivative of the second, plus the second times the derivative of the first."  It is often a helpful mental exercise to say this phrasing aloud when executing the product rule.

\input{examples/2-5_Eg3} % EXAMPLE

The following activity further explores the use of the product rule.

\input{activities/2.5.Act1} %ACTIVITY

%---------------------------------------
% SUBSECTION QUOTIENT RULE
%---------------------------------------
\subsection*{The quotient rule}

Because quotients and products are closely linked, we can use the product rule to understand how to take the derivative of a quotient.  In particular, let $Q(x)$ be defined by $Q(x) = f(x)/g(x)$, where $f$ and $g$ are both differentiable functions.  We desire a formula for $Q'$ in terms of $f$, $g$, $f'$, and $g'$.  It turns out that $Q$ is differentiable everywhere that $g(x) \ne 0$.  Moreover, taking the formula $Q = f/g$ and multiplying both sides by $g$, we can observe that 
\[ f(x) = Q(x) \cdot g(x). \]
Thus, we can use the product rule to differentiate $f$.  Doing so,
\[ f'(x) = Q(x) g'(x) + g(x) Q'(x).\]
Since we want to know a formula for $Q'$, we work to solve this most recent equation for $Q'(x)$, finding first that
\[ Q'(x) g(x) = f'(x) - Q(x) g'(x).\]
Dividing both sides by $g(x)$, we have
\[ Q'(x) = \frac{f'(x) - Q(x) g'(x)}{g(x)}.\]
Finally, we also recall that $Q(x) = \frac{f(x)}{g(x)}.$  Using this expression in the preceding equation and simplifying, we have
\begin{eqnarray*}
Q'(x) & = & \frac{f'(x) - \frac{f(x)}{g(x)} g'(x)}{g(x)} \\
	& = & \frac{f'(x) - \frac{f(x)}{g(x)} g'(x)}{g(x)} \cdot \frac{g(x)}{g(x)} \\
	& = & \frac{g(x) f'(x) -  f(x) g'(x)}{g(x)^2}. 
\end{eqnarray*}
This shows the fundamental argument for why the \emph{quotient rule} holds.

\concept{ Quotient Rule \index{quotient rule}}{ % CONCEPT
If $f$ and $g$ are differentiable functions, then their quotient $Q(x) = \frac{f(x)}{g(x)}$ is also a differentiable function for all $x$ where $g(x) \ne 0$, and
\[ Q'(x) = \frac{g(x)f'(x) - f(x) g'(x)}{g(x)^2}.\]
} %end concept

Like the product rule, it can be helpful to think of the quotient rule verbally.  If a function $Q$ is the quotient of a top function $f$ and a bottom function $g$, then $Q'$ is given by ``the bottom times the derivative of the top, minus the top times the derivative of the bottom, all over the bottom squared.''  

\input{examples/2-5_Eg4} %EXAMPLE

The following activity further explores the use of the quotient rule.

\input{activities/2.5.Act2} %ACTIVITY

%------------------------------------------
% SUBSECTION COMBINING RULES
%------------------------------------------
\subsection*{Combining rules}

One of the challenges to learning to apply various derivative shortcut rules correctly and effectively is recognizing the fundamental structure of a function.  For instance, consider the function given by
$$f(x) = x\sin(x) + \frac{x^2}{\cos(x) + 2}.$$
How do we decide which rules to apply?  Our first task is to recognize the overall structure of the given function.  Observe that the function $f$ is fundamentally a sum of two slightly less complicated functions, so we can apply the sum rule\sidenote[][-2cm]{When taking a derivative that involves the use of multiple derivative rules, it is often helpful to use the notation $\frac{d}{dx} \left[ ~~\right]$ to wait to apply subsequent rules.  This is demonstrated in each of the two examples presented here.} and get
\begin{eqnarray*}
f'(x) & = & \frac{d}{dx} \left[ x\sin(x) + \frac{x^2}{\cos(x) + 2} \right] \\
	& = & \frac{d}{dx} \left[ x\sin(x) \right] + \frac{d}{dx}\left[ \frac{x^2}{\cos(x) + 2} \right]  
\end{eqnarray*}
Now, the left-hand term above is a product, so the product rule is needed there, while the right-hand term is a quotient, so the quotient rule is required.  Applying these rules respectively, we find that
\begin{eqnarray*}
 f'(x) & = & \left( x \cos(x) + \sin(x) \right) + \frac{(\cos(x) + 2) 2x - x^2(-\sin(x))}{(\cos(x) + 2)^2} \\
        & = & x \cos(x) + \sin(x) + \frac{2x\cos(x) + 4x^2 + x^2\sin(x)}{(\cos(x) + 2)^2}.
\end{eqnarray*}

We next consider how the situation changes with the function defined by
$$s(y) = \frac{y \cdot 7^y}{y^2 + 1}.$$ 
Overall, $s$ is a quotient of two simpler function, so the quotient rule will be needed.  Here, we execute the quotient rule and use the notation $\frac{d}{dy}$ to defer the computation of the derivative of the numerator and derivative of the denominator.  Thus,
$$s'(y) = \frac{(y^2 + 1) \cdot \frac{d}{dy}\left[ y \cdot 7^y \right] - y \cdot 7^y \cdot \frac{d}{dy}\left[y^2 + 1 \right]}{(y^2 + 1)^2}.$$
Now, there remain two derivatives to calculate.  The first one, $\frac{d}{dy}\left[ y \cdot 7^y \right]$ calls for use of the product rule, while the second, $\frac{d}{dy}\left[y^2 + 1 \right]$ takes only an elementary application of the sum rule.  Applying these rules, we now have
$$s'(y) = \frac{(y^2 + 1) [y \cdot 7^y \ln(7) + 7^y \cdot 1] - y \cdot 7^y [2y]}{(y^2 + 1)^2}.$$
While some minor simplification is possible, we are content to leave $s'(y)$ in its current form, having found the desired derivative of $s$.  In summary, to compute the derivative of $s$, we applied the quotient rule.  In so doing, when it was time to compute the derivative of the top function, we used the product rule; at the point where we found the derivative of the bottom function, we used the sum rule.

In general, one of the main keys to success in applying derivative rules is to recognize the structure of the function, followed by the careful and diligent application of relevant derivative rules.  The best way to get good at this process is by doing a large number of exercises, and the next activity provides some practice and exploration to that end.

\input{activities/2.5.Act3} %ACTIVITY

As the algebraic complexity of the functions we are able to differentiate continues to increase, it is important to remember that all of the derivative's meaning continues to hold.  Regardless of the structure of the function $f$, the value of $f'(a)$ tells us the instantaneous rate of change of $f$ with respect to $x$ at the moment $x = a$, as well as the slope of the tangent line to $y = f(x)$ at the point $(a,f(a))$.

%--------------------------------------------------
% SUBSECTION OTHER TRIG FUNCTIONS
%--------------------------------------------------
\subsection*{Derivatives of the tangent, cotangent, secant, and cosecant functions} \index{cotangent} \index{secant} \index{cosecant}

\input{activities/2.5.Act4} %ACTIVITY

In Activity~\ref{A:2.5.Act4}, we found that the derivative of the tangent function can be expressed in several ways, but most simply in terms of the secant function.  Next, we develop the derivative of the cotangent function.

Let $g(x) = \cot(x)$.  To find $g'(x)$, we observe that $g(x) = \frac{\cos(x)}{\sin(x)}$ and apply the quotient rule.  Hence
\begin{eqnarray*}
	g'(x) & = & \frac{\sin(x)(-\sin(x)) - \cos(x) \cos(x)}{\sin^2(x)} \\
	        & = & -\frac{\sin^2(x) + \cos^2(x)}{\sin^2(x)}
\end{eqnarray*}
By the Fundamental Trigonometric Identity, we see that $g'(x) = -\frac{1}{\sin^2(x)}$; recalling that $\csc(x) = \frac{1}{\sin(x)}$, it follows that we can most simply express $g'$ by the rule
$$g'(x) = -\csc^2(x).$$
Note that neither $g$ nor $g'$ is defined when $\sin(x) = 0$, which occurs at every integer multiple of $\pi$.  Hence we have the following rule.

\concept{ Cotangent Function \index{derivative!cotangent}}{ % CONCEPT
For all real numbers $x$ such that $x \ne k\pi$, where $k = 0,$ $\pm 1,$ $\pm 2, \ldots$,  
\[ \frac{d}{dx} [\cot(x)] = -\csc^2(x). \]
} %end concept

Observe that the shortcut rule for the cotangent function is very similar to the rule we discovered in Activity~\ref{A:2.5.Act4} for the tangent function.

\concept{ Tangent Function \index{derivative!tangent}}{  % CONCEPT
For all real numbers $x$ such that $x \ne \frac{k\pi}{2}$, where $k = \pm 1,$ $\pm 2, \ldots$,  
\[ \frac{d}{dx} [\tan(x)] = \sec^2(x). \]
} %end concept

In the next two activities, we develop the rules for differentiating the secant and cosecant functions.

\input{activities/2.5.Act5} %ACTIVITY

\input{activities/2.5.Act6} %ACTIVITY

The quotient rule has thus enabled us to determine the derivatives of the tangent, cotangent, secant, and cosecant functions, expanding our overall library of basic functions we can differentiate.  Moreover, we observe that just as the derivative of any polynomial function is a polynomial, and the derivative of any exponential function is another exponential function, so it is that the derivative of any basic trigonometric function is another function that consists of basic trigonometric functions.  This makes sense because all trigonometric functions are periodic, and hence their derivatives will be periodic, too.

As has been and will continue to be the case throughout our work in Chapter~\ref{CH:2}, the derivative retains all of its fundamental meaning as an instantaneous rate of change and as the slope of the tangent line to the function under consideration.  Our present work primarily expands the list of functions for which we can quickly determine a formula for the derivative.  Moreover, with the addition of $\tan(x)$, $\cot(x)$, $\sec(x)$, and $\csc(x)$ to our library of basic functions, there are many more functions we can differentiate through the sum, constant multiple, product, and quotient rules.  

\input{examples/2-5_Eg5} %EXAMPLE

\input{activities/2.5.Act7} %ACTIVITY

%--------------
% SUMMARY
%--------------
\begin{summary}
\item If a function is a sum, product, or quotient of simpler functions, then we can use the sum, product, or quotient rules to differentiate the overall function in terms of the simpler functions and their derivatives.  
\item The product rule tells us that if $P$ is a product of differentiable functions $f$ and $g$ according to the rule $P(x) = f(x) g(x)$, then 
$$P'(x) = f(x)g'(x) + g(x)f'(x).$$
\item The quotient rule tells us that if $Q$ is a quotient of differentiable functions $f$ and $g$ according to the rule $Q(x) = \frac{f(x)}{g(x)}$, $g(x) \ne 0$, then 
$$Q'(x) = \frac{g(x)f'(x) - f(x)g'(x)}{g(x)^2}.$$
\item The product and quotient rules now complement the constant multiple and sum rules and enable us to compute the derivative of any function that consists of sums, constant multiples, products, and quotients of basic functions we already know how to differentiate.  For instance, if $F$ has the form
$$F(x) = \frac{2a(x) - 5b(x)}{c(x) \cdot d(x)},$$
then $F$ is fundamentally a quotient, and the numerator is a sum of constant multiples and the denominator is a product.  Hence the derivative of $F$ can be found by applying the quotient rule and then using the sum and constant multiple rules to differentiate the numerator and the product rule to differentiate the denominator.
\item The derivatives of the other four trigonometric functions are
$$\frac{d}{dx}[\tan(x)] = \sec^2(x), \ \ \frac{d}{dx}[\cot(x)] = -\csc^2(x),$$ 
$$\frac{d}{dx}[\sec(x)] = \sec(x)\tan(x), \ \mbox{and} \ \frac{d}{dx}[\csc(x)] = -\csc(x)\cot(x).$$
Each derivative exists and is defined on the same domain as the original function.  For example, both the tangent function and its derivative are defined for all real numbers $x$ such that $x \ne \frac{k\pi}{2}$, where $k = \pm 1, \pm 2, \ldots$.
\item The above four rules for the derivatives of the tangent, cotangent, secant, and cosecant can be used along with the rules for power functions, exponential functions, and the sine and cosine, as well as the sum, constant multiple, product, and quotient rules, to quickly differentiate a wide range of different functions.
\end{summary}

\clearpage

%--------------
% EXERCISES
%--------------
\input{exercises/2-5.ProdQuot(Ex)} 

\cleardoublepage